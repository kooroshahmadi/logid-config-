// config for MX Master 3S.
devices: ({
  name: "MX Master 3S";
  timeout: 5000;

  smartshift: {
    on: true;
    threshold: 10;
    torque: 100;
  };

  hiresscroll: {
    hires: true;
    invert: false;
    target: false;
  };

  thumbwheel: {
	cid: 0x2150;
        divert: true;
        invert: false;
        left:{
	  threshold: 1;
	  interval: 2;
	  direction: "Left";
	  mode: "OnInterval";
	  action = {type: "Keypress"; keys: ["KEY_VOLUMEDOWN"];};
	 };
	
	right:{
	  threshold: 1;
	  interval: 2;
	  direction: "Right";
	  mode: "OnInterval";
	  action = {type: "Keypress"; keys: ["KEY_VOLUMEUP"];};
        };
  };

  dpi: 1500; // max=4000

  buttons: (
    // Forward button
    {
      cid: 0x56;
      action = {
        type: "Gestures";
        gestures: (
          {
            direction: "None";
            mode: "OnRelease";
            action = {
              type: "Keypress";
              keys: [ "KEY_LEFTCTRL", "KEY_C" ];
            }
          },

          {
            direction: "Up";
            mode: "OnRelease";
            action = {
              type: "Keypress";
              keys: [ "KEY_PLAYPAUSE" ];
            }
          },

          {
            direction: "Down";
            mode: "OnRelease";
            action = {
              type: "Keypress";
              keys: [ "KEY_LEFTCTRL", "KEY_A" ];
            }
          },

          {
            direction: "Right";
            mode: "OnRelease";
            action = {
              type: "Keypress";
              keys: [ "KEY_NEXTSONG" ];
            }
          },

          {
            direction: "Left";
            mode: "OnRelease";
            action = {
              type: "Keypress";
              keys: [ "KEY_PREVIOUSSONG" ];
            }
          }
        );
      };
    },

    // Back button
    {
      cid: 0x53;
      action = {
        type: "Gestures";
        gestures: (
          {
            direction: "None";
            mode: "OnRelease";
            action = {
              type: "Keypress";
              keys: [ "KEY_LEFTCTRL", "KEY_V" ];
            }
          },
           {
             direction: "Right";
             mode: "OnRelease";
             action = {
             type: "Keypress";
              keys: [ "KEY_FORWARD" ];
             }
          }, 
          {
            direction: "Left";
            mode: "OnRelease";
            action = {
            type: "Keypress";
            keys: [ "KEY_BACK" ];
           }
         }
        );
      };
    },

    // Gesture button (hold and move)
    {
      cid: 0xc3;
      action = {
        type: "Gestures";
        gestures: (
          {
            direction: "None";
            mode: "OnRelease";
	    action = {
              type: "Keypress";
              keys: [ "KEY_LEFTALT", "KEY_LEFTCTRL", "KEY_P" ]; // play/pause
            }
          },

          {
            direction: "Left";
            mode: "OnRelease";
            action = {
              type: "Keypress";
              keys: [ "KEY_LEFTCTRL", "KEY_PAGEUP" ]; // snap window to right
            }
          },

          {
            direction: "Right";
            mode: "OnRelease";
            action = {
              type: "Keypress";
              keys: [ "KEY_LEFTCTRL", "KEY_PAGEDOWN" ];
            }
		  },

		  {
            direction: "Up";
            mode: "onRelease";
            action = {
              type: "Keypress";
              keys: [ "KEY_LEFTCTRL", "KEY_W" ]; // maximize window
            }
		  },
		  
		  {
            direction: "Down";
            mode: "OnRelease";
            action = {
              type: "Keypress";
              keys: [ "KEY_F5" ]; // minimize window
            }
          }
        );
      };
    },  
	
    // Top button
    {
      cid: 0xc4;
      action = {
        type: "Gestures";
        gestures: (
          {
            direction: "None";
            mode: "OnRelease";
            action = {
              type: "ToggleSmartShift";
            }
          },

          {
            direction: "Up";
            mode: "OnRelease";
            action = {
              type: "ChangeDPI";
              inc: 1000,
            }
          },
         
          {
            direction: "Left";
            mode: "OnRelease";
            action = {
              type: "Keypress";
              keys: [ "KEY_LEFTMETA", "KEY_LEFTCTRL", "KEY_L" ]
            }
          },
                    {
            direction: "Right";
            mode: "OnRelease";
            action = {
              type: "Keypress";
              keys: [ "KEY_LEFTMETA", "KEY_LEFTCTRL", "KEY_R" ]
            }
          },

          {
            direction: "Down";
            mode: "OnRelease";
            action = {
              type: "ChangeDPI";
              inc: -1000,
            }
          }
        );
      };
    }
  );
});